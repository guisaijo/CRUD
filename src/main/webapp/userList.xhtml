<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
     <h:head>Users list</h:head>
     <h:body>
	 	<h:form id="form">
			<p:growl id="msgs" showDetail="true" />
		 	
		 	<p:dataTable var="user" widgetVar="userTable" value="#{userView.users}"
		 		paginatorTemplate="{FirstPageLink} {PreviousPageLink} 
		 			{CurrentPageReport} {NextPageLink} {LastPageLink}"
		 		rows="3" paginator="true" 
		 		id="users" emptyMessage="No users found with given criteria" 
		 		filteredValue="#{userView.filteredUsers}" >
		        
		        <f:facet name="header">
		            <p:outputPanel>
		                <h:outputText value="Buscar: " />
		                <p:inputText id="global_filter" onkeyup="PF('userTable').filter()" style="width:150px" placeholder="Enter keyword"/>
		            </p:outputPanel>
		        </f:facet>
		
			    <p:column filterStyle="display:none" filterBy="#{user.id}" headerText="Id">
			        <h:outputText value="#{user.id}" />
			    </p:column>
			 
			    <p:column filterStyle="display:none" filterBy="#{user.name}" headerText="Name">
			        <h:outputText value="#{user.name}" />
			    </p:column>
			 
			    <p:column headerText="Age">
			        <h:outputText value="#{user.age}" />
			    </p:column>
			 
			    <p:column headerText="Gender">
			        <h:outputText value="#{user.gender}" />
			    </p:column>
			    
			    <p:column headerText="Options">
			    
				    <p:commandButton value="Alterar" oncomplete="PF('uploadDlg').show()" update=":form2:uploadDlg" >
				   		<f:setPropertyActionListener target="#{userView.selectedUser}" value="#{user}" />
				    </p:commandButton>
				    
			    </p:column>
			    
			</p:dataTable>
		</h:form>
		<h:form id="form2">
			<p:dialog id="uploadDlg" widgetVar="uploadDlg" header="Alterar" 
				modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<h:panelGrid>
					<p:row>
						<p:column>
							<h:outputText value="ID: " />
							<h:inputText value="#{userView.selectedUser.id}"/>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputText value="Name: " />
							<h:inputText value="#{userView.selectedUser.name}"/>	
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputText value="Age: " />
							<h:inputText value="#{userView.selectedUser.age}"/>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<h:outputText value="Gender: " />
							<h:inputText value="#{userView.selectedUser.gender}"/>
						</p:column>
					</p:row>
					<p:row>
						<p:column><h:commandButton value="Atualizar"/></p:column>
						<p:column><h:commandButton value="Cancelar"/></p:column>
					</p:row>
				</h:panelGrid>
			</p:dialog>
		</h:form>
     </h:body>
</html>